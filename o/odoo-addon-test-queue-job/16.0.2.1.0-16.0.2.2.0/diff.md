# Comparing `tmp/odoo_addon_test_queue_job-16.0.2.1.0-py3-none-any.whl.zip` & `tmp/odoo_addon_test_queue_job-16.0.2.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 36361 bytes, number of entries: 27
--rw-r--r--  2.0 unx     1860 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/__init__.py
--rw-r--r--  2.0 unx      535 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/__manifest__.py
--rw-r--r--  2.0 unx      369 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/data/queue_job_channel_data.xml
--rw-r--r--  2.0 unx     2837 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/data/queue_job_function_data.xml
--rw-r--r--  2.0 unx     3823 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/i18n/de.po
--rw-r--r--  2.0 unx     3530 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/i18n/test_queue_job.pot
--rw-r--r--  2.0 unx     3854 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/i18n/zh_CN.po
--rw-r--r--  2.0 unx       26 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/models/__init__.py
--rw-r--r--  2.0 unx     4680 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/models/test_models.py
--rw-r--r--  2.0 unx      326 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/static/description/icon.png
--rw-r--r--  2.0 unx      246 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/__init__.py
--rw-r--r--  2.0 unx      661 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/common.py
--rw-r--r--  2.0 unx     2266 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_autovacuum.py
--rw-r--r--  2.0 unx     8265 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_delay_mocks.py
--rw-r--r--  2.0 unx     9913 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_delayable.py
--rw-r--r--  2.0 unx    10131 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_dependencies.py
--rw-r--r--  2.0 unx    29457 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_job.py
--rw-r--r--  2.0 unx     2025 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_job_auto_delay.py
--rw-r--r--  2.0 unx     3504 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_job_channels.py
--rw-r--r--  2.0 unx     1397 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_json_field.py
--rw-r--r--  2.0 unx     4167 b- defN 23-Apr-02 09:35 odoo/addons/test_queue_job/tests/test_related_actions.py
--rw-r--r--  2.0 unx     2445 b- defN 23-Apr-02 09:35 odoo_addon_test_queue_job-16.0.2.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-02 09:35 odoo_addon_test_queue_job-16.0.2.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-02 09:35 odoo_addon_test_queue_job-16.0.2.1.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2807 b- defN 23-Apr-02 09:35 odoo_addon_test_queue_job-16.0.2.1.0.dist-info/RECORD
-27 files, 108697 bytes uncompressed, 31619 bytes compressed:  70.9%
+Zip file size: 36853 bytes, number of entries: 27
+-rw-r--r--  2.0 unx     1860 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/__init__.py
+-rw-r--r--  2.0 unx      535 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/__manifest__.py
+-rw-r--r--  2.0 unx      369 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/data/queue_job_channel_data.xml
+-rw-r--r--  2.0 unx     2837 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/data/queue_job_function_data.xml
+-rw-r--r--  2.0 unx     3823 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/i18n/de.po
+-rw-r--r--  2.0 unx     3530 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/i18n/test_queue_job.pot
+-rw-r--r--  2.0 unx     3854 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/i18n/zh_CN.po
+-rw-r--r--  2.0 unx       26 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/models/__init__.py
+-rw-r--r--  2.0 unx     4680 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/models/test_models.py
+-rw-r--r--  2.0 unx      326 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/static/description/icon.png
+-rw-r--r--  2.0 unx      246 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/__init__.py
+-rw-r--r--  2.0 unx      661 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/common.py
+-rw-r--r--  2.0 unx     2266 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_autovacuum.py
+-rw-r--r--  2.0 unx    13958 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_delay_mocks.py
+-rw-r--r--  2.0 unx     9913 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_delayable.py
+-rw-r--r--  2.0 unx    10131 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_dependencies.py
+-rw-r--r--  2.0 unx    29457 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_job.py
+-rw-r--r--  2.0 unx     2025 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_job_auto_delay.py
+-rw-r--r--  2.0 unx     3504 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_job_channels.py
+-rw-r--r--  2.0 unx     1397 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_json_field.py
+-rw-r--r--  2.0 unx     4167 b- defN 23-Jun-02 12:38 odoo/addons/test_queue_job/tests/test_related_actions.py
+-rw-r--r--  2.0 unx     2445 b- defN 23-Jun-02 12:38 odoo_addon_test_queue_job-16.0.2.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-02 12:38 odoo_addon_test_queue_job-16.0.2.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-02 12:38 odoo_addon_test_queue_job-16.0.2.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2808 b- defN 23-Jun-02 12:38 odoo_addon_test_queue_job-16.0.2.2.0.dist-info/RECORD
+27 files, 114391 bytes uncompressed, 32111 bytes compressed:  71.9%
```

## zipnote {}

```diff
@@ -63,20 +63,20 @@
 
 Filename: odoo/addons/test_queue_job/tests/test_json_field.py
 Comment: 
 
 Filename: odoo/addons/test_queue_job/tests/test_related_actions.py
 Comment: 
 
-Filename: odoo_addon_test_queue_job-16.0.2.1.0.dist-info/METADATA
+Filename: odoo_addon_test_queue_job-16.0.2.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_test_queue_job-16.0.2.1.0.dist-info/WHEEL
+Filename: odoo_addon_test_queue_job-16.0.2.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_test_queue_job-16.0.2.1.0.dist-info/top_level.txt
+Filename: odoo_addon_test_queue_job-16.0.2.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_test_queue_job-16.0.2.1.0.dist-info/RECORD
+Filename: odoo_addon_test_queue_job-16.0.2.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/test_queue_job/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2016 Camptocamp SA
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 
 {
     "name": "Queue Job Tests",
-    "version": "16.0.2.1.0",
+    "version": "16.0.2.2.0",
     "author": "Camptocamp,Odoo Community Association (OCA)",
     "license": "LGPL-3",
     "category": "Generic Modules",
     "depends": ["queue_job"],
     "website": "https://github.com/OCA/queue",
     "data": [
         "data/queue_job_channel_data.xml",
```

## odoo/addons/test_queue_job/tests/test_delay_mocks.py

```diff
@@ -9,15 +9,15 @@
 
 from odoo.addons.queue_job.delay import Delayable
 from odoo.addons.queue_job.job import identity_exact
 from odoo.addons.queue_job.tests.common import mock_with_delay, trap_jobs
 
 
 class TestDelayMocks(common.TransactionCase):
-    def test_trap_jobs_on_with_delay(self):
+    def test_trap_jobs_on_with_delay_model(self):
         with trap_jobs() as trap:
             self.env["test.queue.job"].button_that_uses_with_delay()
             trap.assert_jobs_count(1)
             trap.assert_jobs_count(1, only=self.env["test.queue.job"].testing_method)
 
             trap.assert_enqueued_job(
                 self.env["test.queue.job"].testing_method,
@@ -29,14 +29,141 @@
                     eta=15,
                     identity_key=identity_exact,
                     max_retries=1,
                     priority=15,
                 ),
             )
 
+    def test_trap_jobs_on_with_delay_recordset(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            trap.assert_jobs_count(1, only=recordset.testing_method)
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+                properties=dict(
+                    channel="root.test",
+                    description="Test",
+                    eta=15,
+                    identity_key=identity_exact,
+                    max_retries=1,
+                    priority=15,
+                ),
+            )
+
+    def test_trap_jobs_on_with_delay_recordset_no_properties(self):
+        """Verify that trap_jobs() can omit properties"""
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+            )
+
+    def test_trap_jobs_on_with_delay_recordset_partial_properties(self):
+        """Verify that trap_jobs() can check partially properties"""
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+                properties=dict(
+                    description="Test",
+                    eta=15,
+                ),
+            )
+
+    def test_trap_jobs_on_with_delay_assert_model_count_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            self.env["test.queue.job"].button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            with self.assertRaises(AssertionError, msg="0 != 1"):
+                trap.assert_jobs_count(1, only=recordset.testing_method)
+
+    def test_trap_jobs_on_with_delay_assert_recordset_count_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            with self.assertRaises(AssertionError, msg="0 != 1"):
+                trap.assert_jobs_count(
+                    1, only=self.env["test.queue.job"].testing_method
+                )
+
+    def test_trap_jobs_on_with_delay_assert_model_enqueued_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            message = (
+                r"Job <test\.queue.job\(\)>\.testing_method\(1, foo=2\) with "
+                r"properties \(channel=root\.test, description=Test, eta=15, "
+                "identity_key=<function identity_exact at 0x[0-9a-fA-F]+>, "
+                "max_retries=1, priority=15\\) was not enqueued\\.\n"
+                "Actual enqueued jobs:\n"
+                r" \* <test.queue.job\(%s,\)>.testing_method\(1, foo=2\) with properties "
+                r"\(priority=15, max_retries=1, eta=15, description=Test, channel=root.test, "
+                r"identity_key=<function identity_exact at 0x[0-9a-fA-F]+>\)"
+            ) % (recordset.id,)
+            with self.assertRaisesRegex(AssertionError, message):
+                trap.assert_enqueued_job(
+                    self.env["test.queue.job"].testing_method,
+                    args=(1,),
+                    kwargs={"foo": 2},
+                    properties=dict(
+                        channel="root.test",
+                        description="Test",
+                        eta=15,
+                        identity_key=identity_exact,
+                        max_retries=1,
+                        priority=15,
+                    ),
+                )
+
+    def test_trap_jobs_on_with_delay_assert_recordset_enqueued_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            self.env["test.queue.job"].button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            message = (
+                r"Job <test\.queue.job\(%s,\)>\.testing_method\(1, foo=2\) with "
+                r"properties \(channel=root\.test, description=Test, eta=15, "
+                "identity_key=<function identity_exact at 0x[0-9a-fA-F]+>, "
+                "max_retries=1, priority=15\\) was not enqueued\\.\n"
+                "Actual enqueued jobs:\n"
+                r" \* <test.queue.job\(\)>.testing_method\(1, foo=2\) with properties "
+                r"\(priority=15, max_retries=1, eta=15, description=Test, channel=root.test, "
+                r"identity_key=<function identity_exact at 0x[0-9a-fA-F]+>\)"
+            ) % (recordset.id,)
+            with self.assertRaisesRegex(AssertionError, message):
+                trap.assert_enqueued_job(
+                    recordset.testing_method,
+                    args=(1,),
+                    kwargs={"foo": 2},
+                    properties=dict(
+                        channel="root.test",
+                        description="Test",
+                        eta=15,
+                        identity_key=identity_exact,
+                        max_retries=1,
+                        priority=15,
+                    ),
+                )
+
     def test_trap_jobs_on_graph(self):
         with trap_jobs() as trap:
             self.env["test.queue.job"].button_that_uses_delayable_chain()
             trap.assert_jobs_count(3)
             trap.assert_jobs_count(2, only=self.env["test.queue.job"].testing_method)
             trap.assert_jobs_count(1, only=self.env["test.queue.job"].no_description)
```

## Comparing `odoo_addon_test_queue_job-16.0.2.1.0.dist-info/METADATA` & `odoo_addon_test_queue_job-16.0.2.2.0.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-test-queue-job
-Version: 16.0.2.1.0
+Version: 16.0.2.2.0
 Summary: Queue Job Tests
 Home-page: https://github.com/OCA/queue
 Author: Camptocamp,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_test_queue_job-16.0.2.1.0.dist-info/RECORD` & `odoo_addon_test_queue_job-16.0.2.2.0.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,27 +1,27 @@
 odoo/addons/test_queue_job/README.rst,sha256=6RXiyqDTBWb-vuNWjDyI-_NwSTQR-90u6mzaUSieck8,1860
 odoo/addons/test_queue_job/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/test_queue_job/__manifest__.py,sha256=sGqpFLy85RZ9eDGQTslxcXmltb_o105BQZLBm8A3bAI,535
+odoo/addons/test_queue_job/__manifest__.py,sha256=GWn0z5Whx9EJUJazUeqF8ZWVsMMTOrwlkpCsb1BTxl4,535
 odoo/addons/test_queue_job/data/queue_job_channel_data.xml,sha256=7QS--R-OZs7VSNUROMTtb82UZM_WHgfWFcVdpUDhiaA,369
 odoo/addons/test_queue_job/data/queue_job_function_data.xml,sha256=K-NESFOZ7Ce-I8NPxT12-v_lQRyLc3laASdoQCdFmmU,2837
 odoo/addons/test_queue_job/i18n/de.po,sha256=-x_X-GPBocg8dJdrB6U2HXjM3hDISl26G0wJri0pWjg,3823
 odoo/addons/test_queue_job/i18n/test_queue_job.pot,sha256=Axg0NRydBJlR3-upQc7rgFd0n_c3Qd4sLBpVIhK1aNc,3530
 odoo/addons/test_queue_job/i18n/zh_CN.po,sha256=OfHky0qEd9yoSFQtViyEHuQnuhiZfGVEqFZx5pb99f8,3854
 odoo/addons/test_queue_job/models/__init__.py,sha256=VtVI4iJ0Fw5vqWYTBGqUejsHwCOhHvrtIXnpO9vuqTI,26
 odoo/addons/test_queue_job/models/test_models.py,sha256=NHafzKZAtWtNH1ceM1YCmxZllQgESkmIIcqh5xU7m1Q,4680
 odoo/addons/test_queue_job/security/ir.model.access.csv,sha256=mqnWa1DiQBqA-WHvUqZtMfU-IdT-sybwt1nyABc_Y4k,326
 odoo/addons/test_queue_job/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/test_queue_job/tests/__init__.py,sha256=bsCoECiP-0yBaQg8zMd5wLANciRniMBkmSKq_qASW14,246
 odoo/addons/test_queue_job/tests/common.py,sha256=aEqPk2-fDi7N4b7kCgGdoZUhjqbAQVpIy99mHLU2Mbk,661
 odoo/addons/test_queue_job/tests/test_autovacuum.py,sha256=b-kN5lVr7J7vdDQt1L3MlNy0Q3imrZmBjhFogj-H5V0,2266
-odoo/addons/test_queue_job/tests/test_delay_mocks.py,sha256=t77BOLdfzyEX8HDHmVsWL1KVRP6EabF054Rl8M_g-aw,8265
+odoo/addons/test_queue_job/tests/test_delay_mocks.py,sha256=GTHU-H5qJIEHa4CN2sSIs2lkN349QeBQoMlKcVcQYc8,13958
 odoo/addons/test_queue_job/tests/test_delayable.py,sha256=kz4aoSvc94sVJqJCSumt0KX2Drlx547nNOscDUA0500,9913
 odoo/addons/test_queue_job/tests/test_dependencies.py,sha256=EqG5rKY0LJUdr9-uyekXdQ637uEMFiNIiPxglf9axww,10131
 odoo/addons/test_queue_job/tests/test_job.py,sha256=7EClTTUTkGaqJ3GpCOxgQ9xL_DK4l8uqaWuFKyx05Dk,29457
 odoo/addons/test_queue_job/tests/test_job_auto_delay.py,sha256=aj4Ix--9mM-D7RzM7JnPWBtDH6A57HywMcroZOAZtIc,2025
 odoo/addons/test_queue_job/tests/test_job_channels.py,sha256=7KMpLdO6runH_yoWHbPTFJFcEidsWie-IjzBrryy6j4,3504
 odoo/addons/test_queue_job/tests/test_json_field.py,sha256=ePvvP7LWnAzRzKPpRab4hmddTzhw0gcWe91vymfMJ88,1397
 odoo/addons/test_queue_job/tests/test_related_actions.py,sha256=N_wYL8OjamAXiaBLm6AXcX9ttUP_T0-uOg8BlOgJUkI,4167
-odoo_addon_test_queue_job-16.0.2.1.0.dist-info/METADATA,sha256=l1R6s_EhtQLS1ReNlPoKoUAlWvBycQNpvOGpkOIWRVQ,2445
-odoo_addon_test_queue_job-16.0.2.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_test_queue_job-16.0.2.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_test_queue_job-16.0.2.1.0.dist-info/RECORD,,
+odoo_addon_test_queue_job-16.0.2.2.0.dist-info/METADATA,sha256=AeOhpuBY6xFlAUpVQk9BfjVoGtdFfWcuT9sLpplJnUA,2445
+odoo_addon_test_queue_job-16.0.2.2.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_test_queue_job-16.0.2.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_test_queue_job-16.0.2.2.0.dist-info/RECORD,,
```

