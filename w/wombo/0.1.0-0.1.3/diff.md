# Comparing `tmp/wombo-0.1.0.tar.gz` & `tmp/wombo-0.1.3.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "wombo-0.1.0.tar", max compression
+gzip compressed data, was "wombo-0.1.3.tar", max compression
```

## Comparing `wombo-0.1.0.tar` & `wombo-0.1.3.tar`

### file list

```diff
@@ -1,8 +1,11 @@
--rw-r--r--   0        0        0     1066 2023-06-02 14:02:35.382424 wombo-0.1.0/LICENSE
--rw-r--r--   0        0        0        7 2023-06-02 14:02:35.382424 wombo-0.1.0/README.md
--rw-r--r--   0        0        0      319 2023-06-02 14:22:31.106424 wombo-0.1.0/pyproject.toml
--rw-r--r--   0        0        0       70 2023-06-02 14:20:19.386424 wombo-0.1.0/wombo/__init__.py
--rw-r--r--   0        0        0     4118 2023-06-02 14:20:48.810424 wombo-0.1.0/wombo/async_dream.py
--rw-r--r--   0        0        0     2851 2023-06-02 14:21:31.050424 wombo-0.1.0/wombo/dream.py
--rw-r--r--   0        0        0     3274 2023-06-02 14:21:55.846424 wombo-0.1.0/wombo/urls.py
--rw-r--r--   0        0        0      488 1970-01-01 00:00:00.000000 wombo-0.1.0/PKG-INFO
+-rw-r--r--   0        0        0     1066 2023-06-02 14:02:35.382424 wombo-0.1.3/LICENSE
+-rw-r--r--   0        0        0       35 2023-06-02 15:32:46.562424 wombo-0.1.3/README.md
+-rw-r--r--   0        0        0      340 2023-06-02 15:48:32.238424 wombo-0.1.3/pyproject.toml
+-rw-r--r--   0        0        0       70 2023-06-02 14:20:19.386424 wombo-0.1.3/wombo/__init__.py
+-rw-r--r--   0        0        0     3944 2023-06-02 15:33:20.162424 wombo-0.1.3/wombo/async_dream.py
+-rw-r--r--   0        0        0     3421 2023-06-02 15:37:20.226424 wombo-0.1.3/wombo/dream.py
+-rw-r--r--   0        0        0       93 2023-06-02 14:55:39.890424 wombo-0.1.3/wombo/models/__init__.py
+-rw-r--r--   0        0        0      524 2023-06-02 15:01:24.554424 wombo-0.1.3/wombo/models/check_task.py
+-rw-r--r--   0        0        0      513 2023-06-02 14:46:35.578424 wombo-0.1.3/wombo/models/create_task.py
+-rw-r--r--   0        0        0     3274 2023-06-02 14:21:55.846424 wombo-0.1.3/wombo/urls.py
+-rw-r--r--   0        0        0      558 1970-01-01 00:00:00.000000 wombo-0.1.3/PKG-INFO
```

### Comparing `wombo-0.1.0/LICENSE` & `wombo-0.1.3/LICENSE`

 * *Files identical despite different names*

### Comparing `wombo-0.1.0/wombo/async_dream.py` & `wombo-0.1.3/wombo/async_dream.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 import httpx
 import asyncio
 import re
 from PIL import Image
 import io
 
 from wombo.urls import urls, auth_key_headers, headers_gen, check_headers
+from wombo.models import CreateTask, CheckTask
 
 
 class AsyncDream:
     def __init__(self) -> None:
         self.client = httpx.AsyncClient()
 
     async def _get_js_filename(self) -> str:
@@ -41,92 +42,83 @@
 			)
         
         result = response.json()
         return result['idToken']
     
     
     # ============================================================================================= # 
-    async def create_task(self, text: str, style: int = 84) -> str:
+    async def create_task(self, text: str, style: int = 84) -> CreateTask:
         ''' We set the task to generate an image and use a certain TASK_ID, which we will track'''
         draw_url = "https://paint.api.wombo.ai/api/v2/tasks"
         auth_key = await self._get_auth_key()
         data = '{"is_premium":false,"input_spec":{"prompt":"%s","style":%d,"display_freq":10}}' % (text[:200], style)
 
         response = await self.client.post(draw_url,
 				headers=headers_gen(auth_key),
 				data=data.encode(),
 				timeout=20
 			)
         result = response.json()
-        return result['id']
+        result = CreateTask.parse_obj(result)
+        return result
     
-    async def check_task(self, task_id: str) -> str:
+    async def check_task(self, task_id: str, only_bool: bool=True) -> CheckTask | bool:
         ''' Checks if the image has already been generated by task_id '''
         img_check_url = f"https://paint.api.wombo.ai/api/v2/tasks/{task_id}"
 
         response = await self.client.get(img_check_url, headers=check_headers, timeout=10)
         result = response.json()
 
-        print(result)
-        if result['result']:
-            return result['final']
-        elif result["is_nsfw"]:
-            return result["photo_url_list"][len(result["photo_url_list"]) - 1]
-        return 0
-    
-    async def get_stage_task(self, task_id: str) -> list:
-        img_check_url = f"https://paint.api.wombo.ai/api/v2/tasks/{task_id}"
-
-        response = await self.client.get(img_check_url, headers=check_headers, timeout=10)
-        result = response.json()
-
-        if result:
-            return result["photo_url_list"]
-        elif result["is_nsfw"]:
-            return result["photo_url_list"]
-        return 0
-
+        result = CheckTask.parse_obj(result)
+        if only_bool:
+            if result.photo_url_list:
+                return True
+            else:
+                return False
+        return result
 
 
     def gif_creating(self, frames: list, duration: int = 400) -> io.BytesIO:
+
         result = io.BytesIO()
         frames[0].save(
             result,
             save_all=True,
             append_images=frames[1:],  # Срез который игнорирует первый кадр.
             format='GIF',
             duration=duration, 
             loop=1
         )
         return result
     
     async def gif(self, url_list: list, thread: bool = True) -> io.BytesIO:
-        frames = []
-        tasks = []
-        for url in url_list:
-            task = self.client.get(url)
-            tasks.append(task)
+        """ Creating a streaming object with gif """
+        tasks = [self.client.get(url) for url in url_list]
         res = await asyncio.gather(*tasks)
-        for url in res:
-            frame = Image.open(io.BytesIO(url.content))
-            frames.append(frame)
+        frames= [Image.open(io.BytesIO(url.content)) for url in res]
         if thread:
             result = await asyncio.to_thread(self.gif_creating, (frames))
         else:
             result = self.gif_creating(frames)
         return result
 
 
 
     
 async def main():
     dream = AsyncDream()
-    frames = await dream.get_stage_task("22faeb1b-6adb-4210-9ac8-9289752d0a4a")
-    res = await dream.gif(frames)
-    with open("file.gif", 'wb') as f:
+    task = await dream.create_task(input("Промт: "))
+    while True:
+        if await dream.check_task(task.id):
+            break
+        await asyncio.sleep(3)
+    task = await dream.check_task(task.id, False)
+    with open("file.gif", "wb") as f:
+        res = await dream.gif(task.photo_url_list)
         f.write(res.getvalue())
+    # frames = await dream.get_stage_task(task)
 
 
     
 asyncio.run(main())
```

### Comparing `wombo-0.1.0/wombo/urls.py` & `wombo-0.1.3/wombo/urls.py`

 * *Files identical despite different names*

